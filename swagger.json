{"openapi":"3.0.1","info":{"title":"Husdjursregister","description":"API för hantering av husdjursregister med JWT-autentisering","version":"v1.0"},"servers":[{"url":"http://localhost:8080","description":"Generated server url"}],"security":[{"bearerAuth":[]}],"tags":[{"name":"Authentication Controller","description":"Endpoints för användarregistrering och inloggning"},{"name":"User Controller","description":"Endpoints for user management"}],"paths":{"/api/users/password":{"put":{"tags":["User Controller"],"summary":"Update user password","operationId":"updateUserPassword","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdatePasswordDto"}}},"required":true},"responses":{"200":{"description":"Password updated","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserDto"}}}},"400":{"description":"Invalid password","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserDto"}}}}}}},"/api/users/id/{userId}":{"get":{"tags":["User Controller"],"summary":"Find user by id","operationId":"findUserById","parameters":[{"name":"userId","in":"path","description":"The id of the user to be returned","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"User found and returned","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserDto"}}}},"204":{"description":"No user found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserDto"}}}}}},"put":{"tags":["User Controller"],"summary":"Update user by id","operationId":"updateUserById","parameters":[{"name":"userId","in":"path","description":"The id of the user to be updated","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateUserDto"}}},"required":true},"responses":{"200":{"description":"User updated","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserDto"}}}},"404":{"description":"User not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserDto"}}}}}},"delete":{"tags":["User Controller"],"summary":"Delete user by id","operationId":"deleteUserById","parameters":[{"name":"userId","in":"path","description":"The id of the user to be deleted","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"User deleted"},"404":{"description":"User not found"}}}},"/api/pet/{id}":{"get":{"tags":["pet-controller"],"summary":"Retrieve pet by ID","operationId":"getPetById","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"404":{"description":"Pet not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PetDto"}}}},"200":{"description":"Successfully retrieved the pet","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PetDto"}}}},"401":{"description":"Unauthorized access","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PetDto"}}}}}},"put":{"tags":["pet-controller"],"summary":"Update existing pet","operationId":"updatePet","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PetDto"}}},"required":true},"responses":{"404":{"description":"Pet not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PetDto"}}}},"200":{"description":"Successfully updated the pet","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PetDto"}}}},"400":{"description":"Invalid input data","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PetDto"}}}},"401":{"description":"Unauthorized access","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PetDto"}}}}}},"delete":{"tags":["pet-controller"],"summary":"Delete pet by ID","operationId":"deletePet","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"204":{"description":"Successfully deleted the pet"},"404":{"description":"Pet not found"},"401":{"description":"Unauthorized access"}}}},"/auth/signup":{"post":{"tags":["Authentication Controller"],"summary":"Register a new user","description":"Creates and stores a new user in the database","operationId":"register","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterUserDto"}}},"required":true},"responses":{"200":{"description":"User successfully registered","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserDto"}}}}}}},"/auth/login":{"post":{"tags":["Authentication Controller"],"summary":"User Login","description":"Allows an existing user to log in to the API","operationId":"authenticate","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginUserDto"}}},"required":true},"responses":{"200":{"description":"User successfully logged in","content":{"*/*":{"schema":{"$ref":"#/components/schemas/LoginResponse"}}}}}}},"/api/pet":{"post":{"tags":["pet-controller"],"summary":"Add new pet","operationId":"addPet","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Pet"}}},"required":true},"responses":{"200":{"description":"Successfully added the pet","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PetDto"}}}},"400":{"description":"Invalid input data","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PetDto"}}}},"401":{"description":"Unauthorized access","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PetDto"}}}}}}},"/api/users/usernames":{"get":{"tags":["User Controller"],"summary":"Find users by multiple usernames","operationId":"findUsersByUsernames","parameters":[{"name":"usernames","in":"query","description":"The username of the user to be returned","required":true,"schema":{"type":"array","items":{"type":"string"}}}],"responses":{"200":{"description":"Users found and returned","content":{"*/*":{"schema":{"uniqueItems":true,"type":"array","items":{"$ref":"#/components/schemas/UserDto"}}}}},"204":{"description":"No users found","content":{"*/*":{"schema":{"uniqueItems":true,"type":"array","items":{"$ref":"#/components/schemas/UserDto"}}}}}}}},"/api/users/usernames/{username}":{"get":{"tags":["User Controller"],"summary":"Find user by username","operationId":"findUserByUsername","parameters":[{"name":"username","in":"path","description":"The username of the user to be returned","required":true,"schema":{"type":"string"}}],"responses":{"204":{"description":"User not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserDto"}}}},"200":{"description":"User found and returned","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserDto"}}}}}}},"/api/users/ids":{"get":{"tags":["User Controller"],"summary":"Find users by ids","operationId":"findUsersByIds","parameters":[{"name":"ids","in":"query","description":"The ids of the users to be returned","required":true,"schema":{"uniqueItems":true,"type":"array","items":{"type":"integer","format":"int64"}}}],"responses":{"200":{"description":"Users found and returned","content":{"*/*":{"schema":{"uniqueItems":true,"type":"array","items":{"$ref":"#/components/schemas/UserDto"}}}}},"204":{"description":"No users found","content":{"*/*":{"schema":{"uniqueItems":true,"type":"array","items":{"$ref":"#/components/schemas/UserDto"}}}}}}}},"/api/users/all":{"get":{"tags":["User Controller"],"summary":"Find all users","operationId":"findAllUsers","responses":{"200":{"description":"Users found and returned","content":{"*/*":{"schema":{"type":"object"}}}},"204":{"description":"No users found","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/api/pet/all":{"get":{"tags":["pet-controller"],"summary":"Retrieve all pets","operationId":"getAllPets","responses":{"200":{"description":"Successfully retrieved all pets","content":{"*/*":{"schema":{"type":"object"}}}}}}}},"components":{"schemas":{"UpdatePasswordDto":{"required":["confirmNewPassword","newPassword"],"type":"object","properties":{"newPassword":{"type":"string"},"confirmNewPassword":{"type":"string"}}},"UserDto":{"type":"object","properties":{"id":{"type":"integer","description":"The user id","format":"int64","example":1},"username":{"type":"string","description":"The username","example":"johnDoe"}}},"UpdateUserDto":{"type":"object","properties":{"username":{"type":"string"},"password":{"type":"string"},"admin":{"type":"boolean"}}},"PetDto":{"type":"object","properties":{"species":{"type":"string","enum":["DOG","CAT","BIRD","RODENT"]},"breed":{"type":"string"},"name":{"type":"string"},"birthdate":{"type":"string"},"userId":{"type":"integer","format":"int64"}}},"RegisterUserDto":{"required":["isAdmin","password","username"],"type":"object","properties":{"username":{"type":"string"},"password":{"type":"string"},"isAdmin":{"type":"string"}}},"LoginUserDto":{"type":"object","properties":{"username":{"type":"string"},"password":{"type":"string"}}},"LoginResponse":{"type":"object","properties":{"token":{"type":"string"},"expiresIn":{"type":"integer","format":"int64"}}},"GrantedAuthority":{"type":"object","properties":{"authority":{"type":"string"}}},"Pet":{"type":"object","properties":{"id":{"type":"integer","description":"The unique identifier of the pet","format":"int64","example":1},"species":{"type":"string","description":"Enums to limit the choice of the user","example":"Dog, Cat, Bird, Rodent","enum":["DOG","CAT","BIRD","RODENT"]},"breed":{"maxLength":50,"minLength":0,"type":"string","description":"Breed of the pet is set from input of the user, moderated by admin","example":"Pomeranian"},"name":{"maxLength":50,"minLength":0,"type":"string","description":"Name of the pet","example":"Teddy"},"birthDate":{"type":"string","description":"The birthdate of the pet","format":"date","example":"2024-10-01"},"user":{"$ref":"#/components/schemas/Users"}}},"Users":{"required":["username"],"type":"object","properties":{"userId":{"type":"integer","description":"The user's ID","format":"int64","example":1},"username":{"maxLength":50,"minLength":0,"type":"string","description":"The user's username","example":"johnDoe"},"pets":{"type":"array","description":"List of pets owned by the user","items":{"$ref":"#/components/schemas/Pet"}},"enabled":{"type":"boolean"},"authorities":{"type":"array","items":{"$ref":"#/components/schemas/GrantedAuthority"}},"accountNonLocked":{"type":"boolean"},"accountNonExpired":{"type":"boolean"},"credentialsNonExpired":{"type":"boolean"}},"description":"The user the pet belongs to","example":1}},"securitySchemes":{"bearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}}}}